{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ContractFactory = exports.Contract = void 0;\nconst ethers_1 = require(\"ethers\");\nconst utils_1 = require(\"./utils\");\nconst types_1 = require(\"./types\");\nvar ethers_2 = require(\"ethers\");\nObject.defineProperty(exports, \"Contract\", {\n  enumerable: true,\n  get: function () {\n    return ethers_2.Contract;\n  }\n});\nclass ContractFactory extends ethers_1.ethers.ContractFactory {\n  constructor(abi, bytecode, signer, deploymentType) {\n    super(abi, bytecode, signer);\n    this.deploymentType = deploymentType || 'create';\n  }\n  encodeCalldata(salt, bytecodeHash, constructorCalldata) {\n    if (this.deploymentType == 'create') {\n      return utils_1.CONTRACT_DEPLOYER.encodeFunctionData('create', [salt, bytecodeHash, constructorCalldata]);\n    } else if (this.deploymentType == 'createAccount') {\n      return utils_1.CONTRACT_DEPLOYER.encodeFunctionData('createAccount', [salt, bytecodeHash, constructorCalldata, types_1.AccountAbstractionVersion.Version1]);\n    } else {\n      throw new Error(`Unsupported deployment type ${this.deploymentType}`);\n    }\n  }\n  getDeployTransaction(...args) {\n    var _a, _b, _c;\n    var _d, _e;\n    // TODO (SMA-1585): Users should be able to provide the salt.\n    let salt = '0x0000000000000000000000000000000000000000000000000000000000000000';\n    // The overrides will be popped out in this call:\n    const txRequest = super.getDeployTransaction(...args);\n    // Removing overrides\n    if (this.interface.deploy.inputs.length + 1 == args.length) {\n      args.pop();\n    }\n    // Salt argument is not used, so we provide a placeholder value.\n    const bytecodeHash = (0, utils_1.hashBytecode)(this.bytecode);\n    const constructorCalldata = ethers_1.utils.arrayify(this.interface.encodeDeploy(args));\n    const deployCalldata = this.encodeCalldata(salt, bytecodeHash, constructorCalldata);\n    txRequest.type = utils_1.EIP712_TX_TYPE;\n    txRequest.to = utils_1.CONTRACT_DEPLOYER_ADDRESS;\n    txRequest.data = deployCalldata;\n    (_a = txRequest.customData) !== null && _a !== void 0 ? _a : txRequest.customData = {};\n    (_b = (_d = txRequest.customData).factoryDeps) !== null && _b !== void 0 ? _b : _d.factoryDeps = [];\n    (_c = (_e = txRequest.customData).gasPerPubdata) !== null && _c !== void 0 ? _c : _e.gasPerPubdata = utils_1.DEFAULT_GAS_PER_PUBDATA_LIMIT;\n    // The number of factory deps is relatively low, so it is efficient enough.\n    if (!txRequest.customData.factoryDeps.includes(this.bytecode)) {\n      txRequest.customData.factoryDeps.push(this.bytecode);\n    }\n    return txRequest;\n  }\n  async deploy(...args) {\n    const contract = await super.deploy(...args);\n    const deployTxReceipt = await contract.deployTransaction.wait();\n    const deployedAddresses = (0, utils_1.getDeployedContracts)(deployTxReceipt).map(info => info.deployedAddress);\n    const contractWithCorrectAddress = new ethers_1.ethers.Contract(deployedAddresses[deployedAddresses.length - 1], contract.interface, contract.signer);\n    ethers_1.utils.defineReadOnly(contractWithCorrectAddress, 'deployTransaction', contract.deployTransaction);\n    return contractWithCorrectAddress;\n  }\n}\nexports.ContractFactory = ContractFactory;","map":{"version":3,"names":["Object","defineProperty","exports","value","ContractFactory","Contract","ethers_1","require","utils_1","types_1","ethers_2","enumerable","get","ethers","constructor","abi","bytecode","signer","deploymentType","encodeCalldata","salt","bytecodeHash","constructorCalldata","CONTRACT_DEPLOYER","encodeFunctionData","AccountAbstractionVersion","Version1","Error","getDeployTransaction","args","_a","_b","_c","_d","_e","txRequest","interface","deploy","inputs","length","pop","hashBytecode","utils","arrayify","encodeDeploy","deployCalldata","type","EIP712_TX_TYPE","to","CONTRACT_DEPLOYER_ADDRESS","data","customData","factoryDeps","gasPerPubdata","DEFAULT_GAS_PER_PUBDATA_LIMIT","includes","push","contract","deployTxReceipt","deployTransaction","wait","deployedAddresses","getDeployedContracts","map","info","deployedAddress","contractWithCorrectAddress","defineReadOnly"],"sources":["C:/Users/SUMAN K/meta_transfer/node_modules/zksync-web3/build/src/contract.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContractFactory = exports.Contract = void 0;\nconst ethers_1 = require(\"ethers\");\nconst utils_1 = require(\"./utils\");\nconst types_1 = require(\"./types\");\nvar ethers_2 = require(\"ethers\");\nObject.defineProperty(exports, \"Contract\", { enumerable: true, get: function () { return ethers_2.Contract; } });\nclass ContractFactory extends ethers_1.ethers.ContractFactory {\n    constructor(abi, bytecode, signer, deploymentType) {\n        super(abi, bytecode, signer);\n        this.deploymentType = deploymentType || 'create';\n    }\n    encodeCalldata(salt, bytecodeHash, constructorCalldata) {\n        if (this.deploymentType == 'create') {\n            return utils_1.CONTRACT_DEPLOYER.encodeFunctionData('create', [salt, bytecodeHash, constructorCalldata]);\n        }\n        else if (this.deploymentType == 'createAccount') {\n            return utils_1.CONTRACT_DEPLOYER.encodeFunctionData('createAccount', [\n                salt,\n                bytecodeHash,\n                constructorCalldata,\n                types_1.AccountAbstractionVersion.Version1\n            ]);\n        }\n        else {\n            throw new Error(`Unsupported deployment type ${this.deploymentType}`);\n        }\n    }\n    getDeployTransaction(...args) {\n        var _a, _b, _c;\n        var _d, _e;\n        // TODO (SMA-1585): Users should be able to provide the salt.\n        let salt = '0x0000000000000000000000000000000000000000000000000000000000000000';\n        // The overrides will be popped out in this call:\n        const txRequest = super.getDeployTransaction(...args);\n        // Removing overrides\n        if (this.interface.deploy.inputs.length + 1 == args.length) {\n            args.pop();\n        }\n        // Salt argument is not used, so we provide a placeholder value.\n        const bytecodeHash = (0, utils_1.hashBytecode)(this.bytecode);\n        const constructorCalldata = ethers_1.utils.arrayify(this.interface.encodeDeploy(args));\n        const deployCalldata = this.encodeCalldata(salt, bytecodeHash, constructorCalldata);\n        txRequest.type = utils_1.EIP712_TX_TYPE;\n        txRequest.to = utils_1.CONTRACT_DEPLOYER_ADDRESS;\n        txRequest.data = deployCalldata;\n        (_a = txRequest.customData) !== null && _a !== void 0 ? _a : (txRequest.customData = {});\n        (_b = (_d = txRequest.customData).factoryDeps) !== null && _b !== void 0 ? _b : (_d.factoryDeps = []);\n        (_c = (_e = txRequest.customData).gasPerPubdata) !== null && _c !== void 0 ? _c : (_e.gasPerPubdata = utils_1.DEFAULT_GAS_PER_PUBDATA_LIMIT);\n        // The number of factory deps is relatively low, so it is efficient enough.\n        if (!txRequest.customData.factoryDeps.includes(this.bytecode)) {\n            txRequest.customData.factoryDeps.push(this.bytecode);\n        }\n        return txRequest;\n    }\n    async deploy(...args) {\n        const contract = await super.deploy(...args);\n        const deployTxReceipt = await contract.deployTransaction.wait();\n        const deployedAddresses = (0, utils_1.getDeployedContracts)(deployTxReceipt).map((info) => info.deployedAddress);\n        const contractWithCorrectAddress = new ethers_1.ethers.Contract(deployedAddresses[deployedAddresses.length - 1], contract.interface, contract.signer);\n        ethers_1.utils.defineReadOnly(contractWithCorrectAddress, 'deployTransaction', contract.deployTransaction);\n        return contractWithCorrectAddress;\n    }\n}\nexports.ContractFactory = ContractFactory;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}