{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SafeService = void 0;\nconst bignumber_1 = require(\"@ethersproject/bignumber\");\nconst axios_1 = __importDefault(require(\"axios\"));\nclass SafeService {\n  constructor(serviceUrl, network) {\n    this.serviceUrl = serviceUrl;\n    this.network = network !== null && network !== void 0 ? network : axios_1.default;\n  }\n  /**\n   * Estimates a Safe transaction\n   *\n   * @param safe - Address of the Safe for which this transaction should be estimated\n   * @param safeTx - Safe transaction that should be estimated for execution\n   * @returns A big number representing the safeTxGas for the passed Safe transaction\n   */\n  async estimateSafeTx(safe, safeTx) {\n    const url = `${this.serviceUrl}/api/v1/safes/${safe}/multisig-transactions/estimations/`;\n    const resp = await this.network.post(url, safeTx);\n    return bignumber_1.BigNumber.from(resp.data.safeTxGas);\n  }\n  /**\n   * Load details for a Safe transaction\n   *\n   * @param safeTxHash - Hash of the Safe transaction\n   * @returns A `SafeTxDetails` object that contains the details of a Safe transaction\n   */\n  async getSafeTxDetails(safeTxHash) {\n    const url = `${this.serviceUrl}/api/v1/multisig-transactions/${safeTxHash}`;\n    const resp = await this.network.get(url);\n    return resp.data;\n  }\n  /**\n   * Propose a new Safe transaction to the service\n   *\n   * @param safeAddress - Address of the Safe for which this transaction should be proposed\n   * @param safeTxHash - Hash of the Safe transaction\n   * @param safeTx - Safe transaction that should be proposed\n   * @param signature - Signature of an owner or a delegate of an owner of the specified Safe to authorize the proposal\n   * @returns The hash of the Safe transaction that has been proposed\n   */\n  async proposeTx(safeAddress, safeTxHash, safeTx, signature) {\n    const url = `${this.serviceUrl}/api/v1/safes/${safeAddress}/multisig-transactions/`;\n    const data = {\n      ...safeTx.data,\n      contractTransactionHash: safeTxHash,\n      sender: signature.signer,\n      signature: signature.data\n    };\n    const resp = await this.network.post(url, data);\n    return resp.data;\n  }\n}\nexports.SafeService = SafeService;","map":{"version":3,"names":["bignumber_1","require","axios_1","__importDefault","SafeService","constructor","serviceUrl","network","default","estimateSafeTx","safe","safeTx","url","resp","post","BigNumber","from","data","safeTxGas","getSafeTxDetails","safeTxHash","get","proposeTx","safeAddress","signature","contractTransactionHash","sender","signer","exports"],"sources":["../../src/service.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AAAA,MAAAA,WAAA,GAAAC,OAAA;AAMA,MAAAC,OAAA,GAAAC,eAAA,CAAAF,OAAA;AAMA,MAAaG,WAAW;EAItBC,YAAYC,UAAkB,EAAEC,OAAuB;IACrD,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,OAAO,GAAGA,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAIL,OAAA,CAAAM,OAAK;EACjC;EAEA;;;;;;;EAOA,MAAMC,cAAcA,CAACC,IAAY,EAAEC,MAAkC;IACnE,MAAMC,GAAG,GAAG,GAAG,IAAI,CAACN,UAAU,iBAAiBI,IAAI,qCAAqC;IACxF,MAAMG,IAAI,GAAG,MAAM,IAAI,CAACN,OAAO,CAACO,IAAI,CAACF,GAAG,EAAED,MAAM,CAAC;IACjD,OAAOX,WAAA,CAAAe,SAAS,CAACC,IAAI,CAACH,IAAI,CAACI,IAAI,CAACC,SAAS,CAAC;EAC5C;EAEA;;;;;;EAMA,MAAMC,gBAAgBA,CAACC,UAAkB;IACvC,MAAMR,GAAG,GAAG,GAAG,IAAI,CAACN,UAAU,iCAAiCc,UAAU,EAAE;IAC3E,MAAMP,IAAI,GAAG,MAAM,IAAI,CAACN,OAAO,CAACc,GAAG,CAAgBT,GAAG,CAAC;IACvD,OAAOC,IAAI,CAACI,IAAI;EAClB;EAEA;;;;;;;;;EASA,MAAMK,SAASA,CACbC,WAAmB,EACnBH,UAAkB,EAClBT,MAAuB,EACvBa,SAAwB;IAExB,MAAMZ,GAAG,GAAG,GAAG,IAAI,CAACN,UAAU,iBAAiBiB,WAAW,yBAAyB;IACnF,MAAMN,IAAI,GAAG;MACX,GAAGN,MAAM,CAACM,IAAI;MACdQ,uBAAuB,EAAEL,UAAU;MACnCM,MAAM,EAAEF,SAAS,CAACG,MAAM;MACxBH,SAAS,EAAEA,SAAS,CAACP;KACtB;IACD,MAAMJ,IAAI,GAAG,MAAM,IAAI,CAACN,OAAO,CAACO,IAAI,CAACF,GAAG,EAAEK,IAAI,CAAC;IAC/C,OAAOJ,IAAI,CAACI,IAAI;EAClB;;AA1DFW,OAAA,CAAAxB,WAAA,GAAAA,WAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}