{"ast":null,"code":"/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Vector3 } from 'three';\n/**\n * Moves Three.js objects from one parent to another\n */\nexport const moveChildren = (from, to) => {\n  while (from.children.length) {\n    to.add(from.children.shift());\n  }\n};\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\nexport const reduceVertices = (model, func, initialValue) => {\n  let value = initialValue;\n  const vertex = new Vector3();\n  model.traverseVisible(object => {\n    let i, l;\n    object.updateWorldMatrix(false, false);\n    const geometry = object.geometry;\n    if (geometry !== undefined) {\n      if (geometry.isGeometry) {\n        const vertices = geometry.vertices;\n        for (i = 0, l = vertices.length; i < l; i++) {\n          vertex.copy(vertices[i]);\n          if (object.isSkinnedMesh) {\n            object.boneTransform(i, vertex);\n          } else {\n            vertex.applyMatrix4(object.matrixWorld);\n          }\n          value = func(value, vertex);\n        }\n      } else if (geometry.isBufferGeometry) {\n        const {\n          position\n        } = geometry.attributes;\n        if (position !== undefined) {\n          for (i = 0, l = position.count; i < l; i++) {\n            vertex.fromBufferAttribute(position, i);\n            if (object.isSkinnedMesh) {\n              object.boneTransform(i, vertex);\n            } else {\n              vertex.applyMatrix4(object.matrixWorld);\n            }\n            value = func(value, vertex);\n          }\n        }\n      }\n    }\n  });\n  return value;\n};","map":{"version":3,"names":["Vector3","moveChildren","from","to","children","length","add","shift","reduceVertices","model","func","initialValue","value","vertex","traverseVisible","object","i","l","updateWorldMatrix","geometry","undefined","isGeometry","vertices","copy","isSkinnedMesh","boneTransform","applyMatrix4","matrixWorld","isBufferGeometry","position","attributes","count","fromBufferAttribute"],"sources":["C:\\Users\\SUMAN K\\meta_transfer\\node_modules\\@google\\model-viewer\\src\\three-components\\ModelUtils.ts"],"sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Object3D, Vector3} from 'three';\n\n/**\n * Moves Three.js objects from one parent to another\n */\nexport const moveChildren = (from: Object3D, to: Object3D) => {\n  while (from.children.length) {\n    to.add(from.children.shift()!);\n  }\n};\n\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\nexport const reduceVertices = <T>(\n    model: Object3D, func: (value: T, vertex: Vector3) => T, initialValue: T):\n    T => {\n      let value = initialValue;\n      const vertex = new Vector3();\n      model.traverseVisible((object: any) => {\n        let i, l;\n\n        object.updateWorldMatrix(false, false);\n\n        const geometry = object.geometry;\n\n        if (geometry !== undefined) {\n          if (geometry.isGeometry) {\n            const vertices = geometry.vertices;\n\n            for (i = 0, l = vertices.length; i < l; i++) {\n              vertex.copy(vertices[i]);\n              if (object.isSkinnedMesh) {\n                object.boneTransform(i, vertex);\n              } else {\n                vertex.applyMatrix4(object.matrixWorld);\n              }\n              value = func(value, vertex);\n            }\n\n          } else if (geometry.isBufferGeometry) {\n            const {position} = geometry.attributes;\n\n            if (position !== undefined) {\n              for (i = 0, l = position.count; i < l; i++) {\n                vertex.fromBufferAttribute(position, i);\n                if (object.isSkinnedMesh) {\n                  object.boneTransform(i, vertex);\n                } else {\n                  vertex.applyMatrix4(object.matrixWorld);\n                }\n\n                value = func(value, vertex);\n              }\n            }\n          }\n        }\n      });\n      return value;\n    };\n"],"mappings":"AAAA;;;;;;;;;;;;;;AAcA,SAAkBA,OAAO,QAAO,OAAO;AAEvC;;;AAGA,OAAO,MAAMC,YAAY,GAAGA,CAACC,IAAc,EAAEC,EAAY,KAAI;EAC3D,OAAOD,IAAI,CAACE,QAAQ,CAACC,MAAM,EAAE;IAC3BF,EAAE,CAACG,GAAG,CAACJ,IAAI,CAACE,QAAQ,CAACG,KAAK,EAAG,CAAC;;AAElC,CAAC;AAED;;;;;;;AAOA,OAAO,MAAMC,cAAc,GAAGA,CAC1BC,KAAe,EAAEC,IAAsC,EAAEC,YAAe,KACpE;EACF,IAAIC,KAAK,GAAGD,YAAY;EACxB,MAAME,MAAM,GAAG,IAAIb,OAAO,EAAE;EAC5BS,KAAK,CAACK,eAAe,CAAEC,MAAW,IAAI;IACpC,IAAIC,CAAC,EAAEC,CAAC;IAERF,MAAM,CAACG,iBAAiB,CAAC,KAAK,EAAE,KAAK,CAAC;IAEtC,MAAMC,QAAQ,GAAGJ,MAAM,CAACI,QAAQ;IAEhC,IAAIA,QAAQ,KAAKC,SAAS,EAAE;MAC1B,IAAID,QAAQ,CAACE,UAAU,EAAE;QACvB,MAAMC,QAAQ,GAAGH,QAAQ,CAACG,QAAQ;QAElC,KAAKN,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGK,QAAQ,CAACjB,MAAM,EAAEW,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;UAC3CH,MAAM,CAACU,IAAI,CAACD,QAAQ,CAACN,CAAC,CAAC,CAAC;UACxB,IAAID,MAAM,CAACS,aAAa,EAAE;YACxBT,MAAM,CAACU,aAAa,CAACT,CAAC,EAAEH,MAAM,CAAC;WAChC,MAAM;YACLA,MAAM,CAACa,YAAY,CAACX,MAAM,CAACY,WAAW,CAAC;;UAEzCf,KAAK,GAAGF,IAAI,CAACE,KAAK,EAAEC,MAAM,CAAC;;OAG9B,MAAM,IAAIM,QAAQ,CAACS,gBAAgB,EAAE;QACpC,MAAM;UAACC;QAAQ,CAAC,GAAGV,QAAQ,CAACW,UAAU;QAEtC,IAAID,QAAQ,KAAKT,SAAS,EAAE;UAC1B,KAAKJ,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGY,QAAQ,CAACE,KAAK,EAAEf,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;YAC1CH,MAAM,CAACmB,mBAAmB,CAACH,QAAQ,EAAEb,CAAC,CAAC;YACvC,IAAID,MAAM,CAACS,aAAa,EAAE;cACxBT,MAAM,CAACU,aAAa,CAACT,CAAC,EAAEH,MAAM,CAAC;aAChC,MAAM;cACLA,MAAM,CAACa,YAAY,CAACX,MAAM,CAACY,WAAW,CAAC;;YAGzCf,KAAK,GAAGF,IAAI,CAACE,KAAK,EAAEC,MAAM,CAAC;;;;;EAKrC,CAAC,CAAC;EACF,OAAOD,KAAK;AACd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}