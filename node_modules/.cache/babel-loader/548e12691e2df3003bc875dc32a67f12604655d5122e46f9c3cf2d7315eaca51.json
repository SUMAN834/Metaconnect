{"ast":null,"code":"import { PaperWallet } from '@thirdweb-dev/wallets';\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { useCreateWalletInstance, useSetConnectionStatus, useSetConnectedWallet, useWalletContext, useConnectionStatus } from '@thirdweb-dev/react-core';\nimport { E as Input, d as fontSize, s as spacing, p as media, C as Container, B as Button, i as iconSize, T as TextDivider, M as ModalHeader, S as Spacer, b as Text, c as Spinner, L as Line, a as ModalTitle, r as reservedScreens, W as WalletEntryButton } from './formElements-33f68cb9.browser.esm.js';\nimport { jsxs, jsx, Fragment } from 'react/jsx-runtime';\nimport { I as InputSelectionUI } from './InputSelectionUI-de582cbe.browser.esm.js';\nimport { useTheme } from '@emotion/react';\nimport { e as emailIcon, u as useScreenContext } from './Tooltip-45fca288.browser.esm.js';\nconst GoogleIcon = props => {\n  return /*#__PURE__*/jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: props.size,\n    viewBox: \"0 0 24 24\",\n    width: props.size,\n    children: [/*#__PURE__*/jsx(\"path\", {\n      d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\",\n      fill: \"#4285F4\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\",\n      fill: \"#34A853\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\",\n      fill: \"#FBBC05\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\",\n      fill: \"#EA4335\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M1 1h22v22H1z\",\n      fill: \"none\"\n    })]\n  });\n};\nfunction openGoogleSignInWindow(themeObj) {\n  // open the popup in the center of the screen\n  const width = 350;\n  const height = 500;\n  const top = (window.innerHeight - height) / 2;\n  const left = (window.innerWidth - width) / 2;\n  const win = window.open(\"\", undefined, `width=${width}, height=${height}, top=${top}, left=${left}`);\n  if (win) {\n    win.document.title = \"Sign In - Google Accounts\";\n    win.document.body.innerHTML = spinnerWindowHtml;\n    win.document.body.style.background = themeObj.colors.modalBg;\n    win.document.body.style.color = themeObj.colors.accentText;\n  }\n\n  // close it when current window is closed or refreshed\n  if (win) {\n    window.addEventListener(\"beforeunload\", () => {\n      win?.close();\n    });\n  }\n  return win;\n}\nconst spinnerWindowHtml = `\n<svg class=\"loader\" viewBox=\"0 0 50 50\">\n  <circle\n    cx=\"25\"\n    cy=\"25\"\n    r=\"20\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"4\"\n  />\n</svg>\n\n<style>\n  body,\n  html {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .loader {\n    width: 15vw;\n    height: 15vw;\n    animation: spin 2s linear infinite;\n  }\n\n  .loader circle {\n    animation: loading 1.5s linear infinite;\n  }\n\n  @keyframes loading {\n    0% {\n      stroke-dasharray: 1, 150;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -35;\n    }\n    100% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -124;\n    }\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n</style>\n`;\nfunction OTPInput(props) {\n  const otp = props.value.split(\"\").map(Number);\n  const setOTP = newOTP => {\n    props.setValue(newOTP.join(\"\"));\n  };\n  const inputToFocusIndex = otp.length;\n  const boxEls = useRef([]);\n  useEffect(() => {\n    if (boxEls.current[inputToFocusIndex]) {\n      requestAnimationFrame(() => {\n        boxEls.current[inputToFocusIndex]?.focus();\n      });\n    }\n  }, [inputToFocusIndex]);\n  return /*#__PURE__*/jsx(Container, {\n    center: \"x\",\n    gap: \"sm\",\n    flex: \"row\",\n    children: new Array(props.digits).fill(null).map((_, i) => {\n      return /*#__PURE__*/jsx(OTPInputBox, {\n        \"data-error\": props.isInvalid,\n        ref: e => boxEls.current[i] = e,\n        value: otp[i] ?? \"\",\n        type: \"number\",\n        pattern: \"[0-9]*\",\n        variant: \"outline\",\n        inputMode: \"numeric\",\n        onPaste: e => {\n          const pastedData = e.clipboardData.getData(\"text/plain\");\n          const newOTP = pastedData.slice(0, props.digits).split(\"\").filter(n => /\\d/.test(n)).map(Number);\n          setOTP(newOTP);\n          e.preventDefault();\n        },\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            if (props.onEnter) {\n              props.onEnter();\n              return;\n            }\n          }\n          if (e.key === \"ArrowLeft\") {\n            if (i === 0) {\n              return;\n            }\n            boxEls.current[i - 1]?.focus();\n            return;\n          }\n          if (e.key === \"ArrowRight\") {\n            if (i === props.digits - 1) {\n              return;\n            }\n            boxEls.current[i + 1]?.focus();\n            return;\n          }\n          if (e.key === \"e\" || e.key === \".\") {\n            e.preventDefault();\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            if (i === 0) {\n              return;\n            }\n            const newOTP = otp.slice(0, -1);\n            setOTP(newOTP);\n          }\n        },\n        onChange: e => {\n          let value = e.target.value;\n          if (value.length > 1) {\n            const lastValue = value[value.length - 1];\n            if (lastValue) {\n              value = lastValue;\n            }\n          }\n          if (!/\\d/.test(value) && value !== \"\") {\n            e.preventDefault();\n            return;\n          }\n          const newOTP = [...otp];\n          const index = i > inputToFocusIndex - 1 ? inputToFocusIndex : i;\n          newOTP[index] = Number(value);\n          setOTP(newOTP);\n        }\n      }, i);\n    })\n  });\n}\nconst OTPInputBox = styled(Input)`\n  appearance: none;\n  -webkit-appearance: none;\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  font-size: ${fontSize.md};\n  padding: ${spacing.xs};\n  ${media.mobile} {\n    width: 35px;\n    height: 35px;\n  }\n  &[data-verify-status=\"invalid\"] {\n    color: ${p => p.theme.colors.danger};\n    border-color: ${p => p.theme.colors.danger};\n  }\n`;\nconst PaperFormUI = props => {\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const themeObj = useTheme();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow(themeObj);\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  return /*#__PURE__*/jsxs(\"div\", {\n    children: [props.googleLoginSupported && /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsxs(SocialButton, {\n        variant: \"secondary\",\n        fullWidth: true,\n        onClick: () => {\n          googleLogin();\n          props.onSelect({\n            google: true\n          });\n        },\n        children: [/*#__PURE__*/jsx(GoogleIcon, {\n          size: iconSize.md\n        }), \"Sign in with Google\"]\n      }), /*#__PURE__*/jsx(TextDivider, {\n        text: \"OR\",\n        py: \"lg\"\n      })]\n    }), /*#__PURE__*/jsx(InputSelectionUI, {\n      onSelect: email => props.onSelect({\n        email\n      }),\n      placeholder: \"Enter your email address\",\n      name: \"email\",\n      type: \"email\",\n      errorMessage: _input => {\n        const input = _input.replace(/\\+/g, \"\");\n        const emailRegex = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,})$/g;\n        const isValidEmail = emailRegex.test(input);\n        if (!isValidEmail) {\n          return \"Invalid email address\";\n        }\n      },\n      emptyErrorMessage: \"email address is required\"\n    })]\n  });\n};\nconst PaperFormUIScreen = props => {\n  const isCompact = props.modalSize === \"compact\";\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    p: \"lg\",\n    animate: \"fadein\",\n    style: {\n      minHeight: \"250px\"\n    },\n    children: [/*#__PURE__*/jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Sign in\"\n    }), isCompact ? /*#__PURE__*/jsx(Spacer, {\n      y: \"xl\"\n    }) : null, /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      p: isCompact ? undefined : \"lg\",\n      children: /*#__PURE__*/jsx(PaperFormUI, {\n        walletConfig: props.walletConfig,\n        googleLoginSupported: props.googleLoginSupported,\n        onSelect: props.onSelect\n      })\n    })]\n  });\n};\nconst SocialButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  gap: ${spacing.sm};\n`;\nconst PaperOTPLoginUI = props => {\n  const email = props.selectionData;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [recoveryCode, setRecoveryCode] = useState(\"\");\n  const {\n    createWalletInstance,\n    setConnectedWallet,\n    setConnectionStatus\n  } = useWalletContext();\n  const [wallet, setWallet] = useState(null);\n  const isWideModal = props.modalSize === \"wide\";\n  const [verifyStatus, setVerifyStatus] = useState(\"idle\");\n  const [sendEmailStatus, setSendEmailStatus] = useState(\"sending\");\n  const recoveryCodeRequired = !!(typeof sendEmailStatus !== \"string\" && sendEmailStatus.recoveryShareManagement !== \"AWS_MANAGED\" && sendEmailStatus.isNewDevice && !sendEmailStatus.isNewUser);\n  const sendEmail = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setSendEmailStatus(\"sending\");\n    try {\n      const _wallet = createWalletInstance(props.walletConfig);\n      setWallet(_wallet);\n      const _paperSDK = await _wallet.getPaperSDK();\n      const {\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      } = await _paperSDK.auth.sendPaperEmailLoginOtp({\n        email: email\n      });\n      setSendEmailStatus({\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      });\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setSendEmailStatus(\"error\");\n    }\n  }, [createWalletInstance, email, props.walletConfig]);\n  const handleSubmit = otp => {\n    if (recoveryCodeRequired && !recoveryCode) {\n      return;\n    }\n    if (typeof sendEmailStatus === \"string\" || otp.length !== 6) {\n      return;\n    }\n    verifyCodes(otp);\n  };\n  const verifyCodes = async otp => {\n    setVerifyStatus(\"idle\");\n    if (!wallet) {\n      return;\n    }\n    try {\n      setVerifyStatus(\"verifying\");\n      setConnectionStatus(\"connecting\");\n      await wallet.connect({\n        email,\n        otp,\n        recoveryCode: recoveryCodeRequired ? recoveryCode : undefined\n      });\n      setConnectedWallet(wallet);\n      setVerifyStatus(\"valid\");\n      props.connected();\n    } catch (e) {\n      setVerifyStatus(\"invalid\");\n      console.error(e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmail();\n    }\n  }, [sendEmail]);\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    animate: \"fadein\",\n    children: [/*#__PURE__*/jsx(Container, {\n      p: \"lg\",\n      children: /*#__PURE__*/jsx(ModalHeader, {\n        title: \"Sign in\",\n        onBack: props.goBack\n      })\n    }), /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      children: /*#__PURE__*/jsxs(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n        },\n        children: [/*#__PURE__*/jsxs(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [!isWideModal && /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Enter the verification code sent to\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: email\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          })]\n        }), /*#__PURE__*/jsx(OTPInput, {\n          isInvalid: verifyStatus === \"invalid\",\n          digits: 6,\n          value: otpInput,\n          setValue: value => {\n            setOtpInput(value);\n            setVerifyStatus(\"idle\"); // reset error\n            if (!recoveryCodeRequired) {\n              handleSubmit(value);\n            }\n          },\n          onEnter: () => {\n            handleSubmit(otpInput);\n          }\n        }), recoveryCodeRequired && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          px: \"lg\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: \"New device detected\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            multiline: true,\n            style: {\n              maxWidth: \"350px\"\n            },\n            children: [\"Enter the recovery code emailed to you \", /*#__PURE__*/jsx(\"br\", {}), \" when you first signed up\"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Input, {\n            sm: true,\n            autoComplete: \"off\",\n            required: true,\n            \"data-error\": verifyStatus === \"invalid\",\n            id: \"recovery-code\",\n            variant: \"outline\",\n            style: {\n              textAlign: \"center\"\n            },\n            value: recoveryCode,\n            onChange: e => setRecoveryCode(e.target.value),\n            placeholder: \"Enter your recovery code\"\n          })]\n        }), verifyStatus === \"invalid\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"md\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            color: \"danger\",\n            center: true,\n            children: [\"Invalid verification code\", \" \", recoveryCodeRequired ? \"or recovery code\" : \"\"]\n          })]\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: \"xl\"\n        }), /*#__PURE__*/jsx(Container, {\n          px: isWideModal ? \"xxl\" : \"lg\",\n          children: verifyStatus === \"verifying\" ? /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Container, {\n              flex: \"row\",\n              center: \"x\",\n              animate: \"fadein\",\n              children: /*#__PURE__*/jsx(Spinner, {\n                size: \"lg\",\n                color: \"accentText\"\n              })\n            })\n          }) : /*#__PURE__*/jsx(Container, {\n            animate: \"fadein\",\n            children: /*#__PURE__*/jsx(Button, {\n              onClick: () => handleSubmit(otpInput),\n              variant: \"accent\",\n              type: \"submit\",\n              style: {\n                width: \"100%\"\n              },\n              children: \"Verify\"\n            })\n          }, \"btn-container\")\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: \"xl\"\n        }), !isWideModal && /*#__PURE__*/jsx(Line, {}), /*#__PURE__*/jsxs(Container, {\n          p: isWideModal ? undefined : \"lg\",\n          animate: \"fadein\",\n          children: [sendEmailStatus === \"error\" && /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              center: true,\n              color: \"danger\",\n              children: \"Failed to send verification code\"\n            })\n          }), sendEmailStatus === \"sending\" && /*#__PURE__*/jsxs(Container, {\n            flex: \"row\",\n            center: \"both\",\n            gap: \"xs\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              children: \"Sending verification code\"\n            }), /*#__PURE__*/jsx(Spinner, {\n              size: \"xs\",\n              color: \"secondaryText\"\n            })]\n          }), typeof sendEmailStatus !== \"string\" && /*#__PURE__*/jsx(LinkButton, {\n            onClick: sendEmail,\n            type: \"button\",\n            children: \"Resend verification code\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nconst LinkButton = styled.button`\n  all: unset;\n  color: ${p => p.theme.colors.accentText};\n  font-size: ${fontSize.sm};\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  &:hover {\n    color: ${p => p.theme.colors.primaryText};\n  }\n`;\nconst PaperGoogleLogin = props => {\n  const {\n    goBack,\n    modalSize,\n    connected\n  } = props;\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const connectionStatus = useConnectionStatus();\n  const themeObj = useTheme();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow(themeObj);\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n      props.connected();\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  useEffect(() => {\n    if (connectionStatus === \"connected\") {\n      connected();\n    }\n  }, [connectionStatus, connected]);\n  return /*#__PURE__*/jsx(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: /*#__PURE__*/jsxs(Container, {\n      flex: \"column\",\n      expand: true,\n      p: \"lg\",\n      style: {\n        paddingBottom: 0\n      },\n      children: [/*#__PURE__*/jsx(ModalHeader, {\n        title: /*#__PURE__*/jsxs(Container, {\n          flex: \"row\",\n          center: \"both\",\n          gap: \"xs\",\n          children: [/*#__PURE__*/jsx(GoogleIcon, {\n            size: iconSize.md\n          }), /*#__PURE__*/jsx(ModalTitle, {\n            children: \" Sign in \"\n          })]\n        }),\n        onBack: goBack\n      }), modalSize === \"compact\" ? /*#__PURE__*/jsx(Spacer, {\n        y: \"xl\"\n      }) : null, /*#__PURE__*/jsxs(Container, {\n        flex: \"column\",\n        center: \"both\",\n        expand: true,\n        style: {\n          textAlign: \"center\",\n          minHeight: \"250px\"\n        },\n        children: [connectionStatus === \"connecting\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            multiline: true,\n            style: {\n              maxWidth: \"250px\"\n            },\n            children: \"Select your Google account in the pop-up\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          }), /*#__PURE__*/jsx(Container, {\n            center: \"x\",\n            flex: \"row\",\n            children: /*#__PURE__*/jsx(Spinner, {\n              size: \"lg\",\n              color: \"accentText\"\n            })\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        }), connectionStatus === \"disconnected\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"danger\",\n            children: \"Failed to sign in\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsxs(Button, {\n            variant: \"primary\",\n            onClick: googleLogin,\n            children: [\" \", \"Retry\", \" \"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        })]\n      })]\n    })\n  });\n};\nconst paperWallet = config => {\n  const defaultRecovery = \"AWS_MANAGED\";\n  return {\n    category: \"socialLogin\",\n    isHeadless: true,\n    id: PaperWallet.id,\n    recommended: config?.recommended,\n    meta: {\n      ...PaperWallet.meta,\n      name: \"Email\",\n      iconURL: emailIcon\n    },\n    create(options) {\n      return new PaperWallet({\n        ...options,\n        ...config,\n        advancedOptions: {\n          recoveryShareManagement: \"AWS_MANAGED\",\n          ...config?.advancedOptions\n        }\n      });\n    },\n    selectUI(props) {\n      return /*#__PURE__*/jsx(PaperSelectionUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    },\n    connectUI(props) {\n      return /*#__PURE__*/jsx(PaperConnectUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    }\n  };\n};\nconst PaperSelectionUI = props => {\n  const screen = useScreenContext();\n\n  // show the icon + text if\n  // wide -\n  // compact + not main screen (safe/smart wallet list screen)\n  if (props.modalSize === \"wide\" || screen !== reservedScreens.main && props.modalSize === \"compact\") {\n    return /*#__PURE__*/jsx(WalletEntryButton, {\n      walletConfig: props.walletConfig,\n      selectWallet: () => {\n        props.onSelect(undefined);\n      }\n    });\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    children: /*#__PURE__*/jsx(PaperFormUI, {\n      walletConfig: props.walletConfig,\n      googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n      onSelect: props.onSelect\n    })\n  });\n};\nconst PaperConnectUI = props => {\n  const [loginType, setLoginType] = useState(props.selectionData);\n  if (loginType) {\n    const handleBack = () => {\n      // go back to base screen\n      if (props.modalSize === \"wide\") {\n        setLoginType(undefined);\n      }\n\n      // go to main screen\n      else {\n        props.goBack();\n      }\n    };\n    if (\"email\" in loginType) {\n      return /*#__PURE__*/jsx(PaperOTPLoginUI, {\n        ...props,\n        recoveryShareManagement: props.recoveryShareManagement,\n        selectionData: loginType.email,\n        goBack: handleBack\n      });\n    }\n\n    // google\n    else {\n      return /*#__PURE__*/jsx(PaperGoogleLogin, {\n        ...props,\n        goBack: handleBack\n      });\n    }\n  }\n  return /*#__PURE__*/jsx(PaperFormUIScreen, {\n    walletConfig: props.walletConfig,\n    googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n    modalSize: props.modalSize,\n    onSelect: _loginType => {\n      setLoginType(_loginType);\n    },\n    onBack: props.goBack\n  });\n};\nvar paperWallet$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  paperWallet: paperWallet\n});\nexport { GoogleIcon as G, OTPInput as O, paperWallet$1 as a, openGoogleSignInWindow as o, paperWallet as p };","map":{"version":3,"names":["PaperWallet","useRef","useEffect","useState","useCallback","styled","useCreateWalletInstance","useSetConnectionStatus","useSetConnectedWallet","useWalletContext","useConnectionStatus","E","Input","d","fontSize","s","spacing","p","media","C","Container","B","Button","i","iconSize","T","TextDivider","M","ModalHeader","S","Spacer","b","Text","c","Spinner","L","Line","a","ModalTitle","r","reservedScreens","W","WalletEntryButton","jsxs","jsx","Fragment","I","InputSelectionUI","useTheme","e","emailIcon","u","useScreenContext","GoogleIcon","props","xmlns","height","size","viewBox","width","children","fill","openGoogleSignInWindow","themeObj","top","window","innerHeight","left","innerWidth","win","open","undefined","document","title","body","innerHTML","spinnerWindowHtml","style","background","colors","modalBg","color","accentText","addEventListener","close","OTPInput","otp","value","split","map","Number","setOTP","newOTP","setValue","join","inputToFocusIndex","length","boxEls","current","requestAnimationFrame","focus","center","gap","flex","Array","digits","_","OTPInputBox","isInvalid","ref","type","pattern","variant","inputMode","onPaste","pastedData","clipboardData","getData","slice","filter","n","test","preventDefault","onKeyDown","key","onEnter","onChange","target","lastValue","index","md","xs","mobile","theme","danger","PaperFormUI","createWalletInstance","setConnectionStatus","setConnectedWallet","googleLogin","paperWallet","walletConfig","googleWindow","Error","connect","openedWindow","closeOpenedWindow","console","error","googleLoginSupported","SocialButton","fullWidth","onClick","onSelect","google","text","py","email","placeholder","name","errorMessage","_input","input","replace","emailRegex","isValidEmail","emptyErrorMessage","PaperFormUIScreen","isCompact","modalSize","fullHeight","animate","minHeight","onBack","y","expand","sm","PaperOTPLoginUI","selectionData","otpInput","setOtpInput","recoveryCode","setRecoveryCode","wallet","setWallet","isWideModal","verifyStatus","setVerifyStatus","sendEmailStatus","setSendEmailStatus","recoveryCodeRequired","recoveryShareManagement","isNewDevice","isNewUser","sendEmail","_wallet","_paperSDK","getPaperSDK","auth","sendPaperEmailLoginOtp","handleSubmit","verifyCodes","connected","emailSentOnMount","goBack","onSubmit","textAlign","px","multiline","maxWidth","autoComplete","required","id","LinkButton","button","primaryText","PaperGoogleLogin","connectionStatus","paddingBottom","config","defaultRecovery","category","isHeadless","recommended","meta","iconURL","create","options","advancedOptions","selectUI","PaperSelectionUI","connectUI","PaperConnectUI","screen","main","selectWallet","loginType","setLoginType","handleBack","_loginType","paperWallet$1","Object","freeze","__proto__","G","O","o"],"sources":["C:/Users/SUMAN K/meta_transfer/node_modules/@thirdweb-dev/react/dist/paperWallet-cec67362.browser.esm.js"],"sourcesContent":["import { PaperWallet } from '@thirdweb-dev/wallets';\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { useCreateWalletInstance, useSetConnectionStatus, useSetConnectedWallet, useWalletContext, useConnectionStatus } from '@thirdweb-dev/react-core';\nimport { E as Input, d as fontSize, s as spacing, p as media, C as Container, B as Button, i as iconSize, T as TextDivider, M as ModalHeader, S as Spacer, b as Text, c as Spinner, L as Line, a as ModalTitle, r as reservedScreens, W as WalletEntryButton } from './formElements-33f68cb9.browser.esm.js';\nimport { jsxs, jsx, Fragment } from 'react/jsx-runtime';\nimport { I as InputSelectionUI } from './InputSelectionUI-de582cbe.browser.esm.js';\nimport { useTheme } from '@emotion/react';\nimport { e as emailIcon, u as useScreenContext } from './Tooltip-45fca288.browser.esm.js';\n\nconst GoogleIcon = props => {\n  return /*#__PURE__*/jsxs(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: props.size,\n    viewBox: \"0 0 24 24\",\n    width: props.size,\n    children: [/*#__PURE__*/jsx(\"path\", {\n      d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\",\n      fill: \"#4285F4\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\",\n      fill: \"#34A853\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\",\n      fill: \"#FBBC05\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\",\n      fill: \"#EA4335\"\n    }), /*#__PURE__*/jsx(\"path\", {\n      d: \"M1 1h22v22H1z\",\n      fill: \"none\"\n    })]\n  });\n};\n\nfunction openGoogleSignInWindow(themeObj) {\n  // open the popup in the center of the screen\n  const width = 350;\n  const height = 500;\n  const top = (window.innerHeight - height) / 2;\n  const left = (window.innerWidth - width) / 2;\n  const win = window.open(\"\", undefined, `width=${width}, height=${height}, top=${top}, left=${left}`);\n  if (win) {\n    win.document.title = \"Sign In - Google Accounts\";\n    win.document.body.innerHTML = spinnerWindowHtml;\n    win.document.body.style.background = themeObj.colors.modalBg;\n    win.document.body.style.color = themeObj.colors.accentText;\n  }\n\n  // close it when current window is closed or refreshed\n  if (win) {\n    window.addEventListener(\"beforeunload\", () => {\n      win?.close();\n    });\n  }\n  return win;\n}\nconst spinnerWindowHtml = `\n<svg class=\"loader\" viewBox=\"0 0 50 50\">\n  <circle\n    cx=\"25\"\n    cy=\"25\"\n    r=\"20\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    stroke-width=\"4\"\n  />\n</svg>\n\n<style>\n  body,\n  html {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  body {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .loader {\n    width: 15vw;\n    height: 15vw;\n    animation: spin 2s linear infinite;\n  }\n\n  .loader circle {\n    animation: loading 1.5s linear infinite;\n  }\n\n  @keyframes loading {\n    0% {\n      stroke-dasharray: 1, 150;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -35;\n    }\n    100% {\n      stroke-dasharray: 90, 150;\n      stroke-dashoffset: -124;\n    }\n  }\n\n  @keyframes spin {\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n</style>\n`;\n\nfunction OTPInput(props) {\n  const otp = props.value.split(\"\").map(Number);\n  const setOTP = newOTP => {\n    props.setValue(newOTP.join(\"\"));\n  };\n  const inputToFocusIndex = otp.length;\n  const boxEls = useRef([]);\n  useEffect(() => {\n    if (boxEls.current[inputToFocusIndex]) {\n      requestAnimationFrame(() => {\n        boxEls.current[inputToFocusIndex]?.focus();\n      });\n    }\n  }, [inputToFocusIndex]);\n  return /*#__PURE__*/jsx(Container, {\n    center: \"x\",\n    gap: \"sm\",\n    flex: \"row\",\n    children: new Array(props.digits).fill(null).map((_, i) => {\n      return /*#__PURE__*/jsx(OTPInputBox, {\n        \"data-error\": props.isInvalid,\n        ref: e => boxEls.current[i] = e,\n        value: otp[i] ?? \"\",\n        type: \"number\",\n        pattern: \"[0-9]*\",\n        variant: \"outline\",\n        inputMode: \"numeric\",\n        onPaste: e => {\n          const pastedData = e.clipboardData.getData(\"text/plain\");\n          const newOTP = pastedData.slice(0, props.digits).split(\"\").filter(n => /\\d/.test(n)).map(Number);\n          setOTP(newOTP);\n          e.preventDefault();\n        },\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            if (props.onEnter) {\n              props.onEnter();\n              return;\n            }\n          }\n          if (e.key === \"ArrowLeft\") {\n            if (i === 0) {\n              return;\n            }\n            boxEls.current[i - 1]?.focus();\n            return;\n          }\n          if (e.key === \"ArrowRight\") {\n            if (i === props.digits - 1) {\n              return;\n            }\n            boxEls.current[i + 1]?.focus();\n            return;\n          }\n          if (e.key === \"e\" || e.key === \".\") {\n            e.preventDefault();\n            return;\n          }\n          if (e.key === \"Backspace\") {\n            if (i === 0) {\n              return;\n            }\n            const newOTP = otp.slice(0, -1);\n            setOTP(newOTP);\n          }\n        },\n        onChange: e => {\n          let value = e.target.value;\n          if (value.length > 1) {\n            const lastValue = value[value.length - 1];\n            if (lastValue) {\n              value = lastValue;\n            }\n          }\n          if (!/\\d/.test(value) && value !== \"\") {\n            e.preventDefault();\n            return;\n          }\n          const newOTP = [...otp];\n          const index = i > inputToFocusIndex - 1 ? inputToFocusIndex : i;\n          newOTP[index] = Number(value);\n          setOTP(newOTP);\n        }\n      }, i);\n    })\n  });\n}\nconst OTPInputBox = styled(Input)`\n  appearance: none;\n  -webkit-appearance: none;\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  font-size: ${fontSize.md};\n  padding: ${spacing.xs};\n  ${media.mobile} {\n    width: 35px;\n    height: 35px;\n  }\n  &[data-verify-status=\"invalid\"] {\n    color: ${p => p.theme.colors.danger};\n    border-color: ${p => p.theme.colors.danger};\n  }\n`;\n\nconst PaperFormUI = props => {\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const themeObj = useTheme();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow(themeObj);\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  return /*#__PURE__*/jsxs(\"div\", {\n    children: [props.googleLoginSupported && /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsxs(SocialButton, {\n        variant: \"secondary\",\n        fullWidth: true,\n        onClick: () => {\n          googleLogin();\n          props.onSelect({\n            google: true\n          });\n        },\n        children: [/*#__PURE__*/jsx(GoogleIcon, {\n          size: iconSize.md\n        }), \"Sign in with Google\"]\n      }), /*#__PURE__*/jsx(TextDivider, {\n        text: \"OR\",\n        py: \"lg\"\n      })]\n    }), /*#__PURE__*/jsx(InputSelectionUI, {\n      onSelect: email => props.onSelect({\n        email\n      }),\n      placeholder: \"Enter your email address\",\n      name: \"email\",\n      type: \"email\",\n      errorMessage: _input => {\n        const input = _input.replace(/\\+/g, \"\");\n        const emailRegex = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,})$/g;\n        const isValidEmail = emailRegex.test(input);\n        if (!isValidEmail) {\n          return \"Invalid email address\";\n        }\n      },\n      emptyErrorMessage: \"email address is required\"\n    })]\n  });\n};\nconst PaperFormUIScreen = props => {\n  const isCompact = props.modalSize === \"compact\";\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    p: \"lg\",\n    animate: \"fadein\",\n    style: {\n      minHeight: \"250px\"\n    },\n    children: [/*#__PURE__*/jsx(ModalHeader, {\n      onBack: props.onBack,\n      title: \"Sign in\"\n    }), isCompact ? /*#__PURE__*/jsx(Spacer, {\n      y: \"xl\"\n    }) : null, /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      p: isCompact ? undefined : \"lg\",\n      children: /*#__PURE__*/jsx(PaperFormUI, {\n        walletConfig: props.walletConfig,\n        googleLoginSupported: props.googleLoginSupported,\n        onSelect: props.onSelect\n      })\n    })]\n  });\n};\nconst SocialButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  gap: ${spacing.sm};\n`;\n\nconst PaperOTPLoginUI = props => {\n  const email = props.selectionData;\n  const [otpInput, setOtpInput] = useState(\"\");\n  const [recoveryCode, setRecoveryCode] = useState(\"\");\n  const {\n    createWalletInstance,\n    setConnectedWallet,\n    setConnectionStatus\n  } = useWalletContext();\n  const [wallet, setWallet] = useState(null);\n  const isWideModal = props.modalSize === \"wide\";\n  const [verifyStatus, setVerifyStatus] = useState(\"idle\");\n  const [sendEmailStatus, setSendEmailStatus] = useState(\"sending\");\n  const recoveryCodeRequired = !!(typeof sendEmailStatus !== \"string\" && sendEmailStatus.recoveryShareManagement !== \"AWS_MANAGED\" && sendEmailStatus.isNewDevice && !sendEmailStatus.isNewUser);\n  const sendEmail = useCallback(async () => {\n    setOtpInput(\"\");\n    setVerifyStatus(\"idle\");\n    setSendEmailStatus(\"sending\");\n    try {\n      const _wallet = createWalletInstance(props.walletConfig);\n      setWallet(_wallet);\n      const _paperSDK = await _wallet.getPaperSDK();\n      const {\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      } = await _paperSDK.auth.sendPaperEmailLoginOtp({\n        email: email\n      });\n      setSendEmailStatus({\n        isNewDevice,\n        isNewUser,\n        recoveryShareManagement\n      });\n    } catch (e) {\n      console.error(e);\n      setVerifyStatus(\"idle\");\n      setSendEmailStatus(\"error\");\n    }\n  }, [createWalletInstance, email, props.walletConfig]);\n  const handleSubmit = otp => {\n    if (recoveryCodeRequired && !recoveryCode) {\n      return;\n    }\n    if (typeof sendEmailStatus === \"string\" || otp.length !== 6) {\n      return;\n    }\n    verifyCodes(otp);\n  };\n  const verifyCodes = async otp => {\n    setVerifyStatus(\"idle\");\n    if (!wallet) {\n      return;\n    }\n    try {\n      setVerifyStatus(\"verifying\");\n      setConnectionStatus(\"connecting\");\n      await wallet.connect({\n        email,\n        otp,\n        recoveryCode: recoveryCodeRequired ? recoveryCode : undefined\n      });\n      setConnectedWallet(wallet);\n      setVerifyStatus(\"valid\");\n      props.connected();\n    } catch (e) {\n      setVerifyStatus(\"invalid\");\n      console.error(e);\n    }\n  };\n\n  // send email on mount\n  const emailSentOnMount = useRef(false);\n  useEffect(() => {\n    if (!emailSentOnMount.current) {\n      emailSentOnMount.current = true;\n      sendEmail();\n    }\n  }, [sendEmail]);\n  return /*#__PURE__*/jsxs(Container, {\n    fullHeight: true,\n    flex: \"column\",\n    animate: \"fadein\",\n    children: [/*#__PURE__*/jsx(Container, {\n      p: \"lg\",\n      children: /*#__PURE__*/jsx(ModalHeader, {\n        title: \"Sign in\",\n        onBack: props.goBack\n      })\n    }), /*#__PURE__*/jsx(Container, {\n      expand: true,\n      flex: \"column\",\n      center: \"y\",\n      children: /*#__PURE__*/jsxs(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n        },\n        children: [/*#__PURE__*/jsxs(\"div\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [!isWideModal && /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Enter the verification code sent to\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: email\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          })]\n        }), /*#__PURE__*/jsx(OTPInput, {\n          isInvalid: verifyStatus === \"invalid\",\n          digits: 6,\n          value: otpInput,\n          setValue: value => {\n            setOtpInput(value);\n            setVerifyStatus(\"idle\"); // reset error\n            if (!recoveryCodeRequired) {\n              handleSubmit(value);\n            }\n          },\n          onEnter: () => {\n            handleSubmit(otpInput);\n          }\n        }), recoveryCodeRequired && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          px: \"lg\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          }), /*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            children: \"New device detected\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"sm\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            multiline: true,\n            style: {\n              maxWidth: \"350px\"\n            },\n            children: [\"Enter the recovery code emailed to you \", /*#__PURE__*/jsx(\"br\", {}), \" when you first signed up\"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsx(Input, {\n            sm: true,\n            autoComplete: \"off\",\n            required: true,\n            \"data-error\": verifyStatus === \"invalid\",\n            id: \"recovery-code\",\n            variant: \"outline\",\n            style: {\n              textAlign: \"center\"\n            },\n            value: recoveryCode,\n            onChange: e => setRecoveryCode(e.target.value),\n            placeholder: \"Enter your recovery code\"\n          })]\n        }), verifyStatus === \"invalid\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Spacer, {\n            y: \"md\"\n          }), /*#__PURE__*/jsxs(Text, {\n            size: \"sm\",\n            color: \"danger\",\n            center: true,\n            children: [\"Invalid verification code\", \" \", recoveryCodeRequired ? \"or recovery code\" : \"\"]\n          })]\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: \"xl\"\n        }), /*#__PURE__*/jsx(Container, {\n          px: isWideModal ? \"xxl\" : \"lg\",\n          children: verifyStatus === \"verifying\" ? /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Container, {\n              flex: \"row\",\n              center: \"x\",\n              animate: \"fadein\",\n              children: /*#__PURE__*/jsx(Spinner, {\n                size: \"lg\",\n                color: \"accentText\"\n              })\n            })\n          }) : /*#__PURE__*/jsx(Container, {\n            animate: \"fadein\",\n            children: /*#__PURE__*/jsx(Button, {\n              onClick: () => handleSubmit(otpInput),\n              variant: \"accent\",\n              type: \"submit\",\n              style: {\n                width: \"100%\"\n              },\n              children: \"Verify\"\n            })\n          }, \"btn-container\")\n        }), /*#__PURE__*/jsx(Spacer, {\n          y: \"xl\"\n        }), !isWideModal && /*#__PURE__*/jsx(Line, {}), /*#__PURE__*/jsxs(Container, {\n          p: isWideModal ? undefined : \"lg\",\n          animate: \"fadein\",\n          children: [sendEmailStatus === \"error\" && /*#__PURE__*/jsx(Fragment, {\n            children: /*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              center: true,\n              color: \"danger\",\n              children: \"Failed to send verification code\"\n            })\n          }), sendEmailStatus === \"sending\" && /*#__PURE__*/jsxs(Container, {\n            flex: \"row\",\n            center: \"both\",\n            gap: \"xs\",\n            style: {\n              textAlign: \"center\"\n            },\n            children: [/*#__PURE__*/jsx(Text, {\n              size: \"sm\",\n              children: \"Sending verification code\"\n            }), /*#__PURE__*/jsx(Spinner, {\n              size: \"xs\",\n              color: \"secondaryText\"\n            })]\n          }), typeof sendEmailStatus !== \"string\" && /*#__PURE__*/jsx(LinkButton, {\n            onClick: sendEmail,\n            type: \"button\",\n            children: \"Resend verification code\"\n          })]\n        })]\n      })\n    })]\n  });\n};\nconst LinkButton = styled.button`\n  all: unset;\n  color: ${p => p.theme.colors.accentText};\n  font-size: ${fontSize.sm};\n  cursor: pointer;\n  text-align: center;\n  width: 100%;\n  &:hover {\n    color: ${p => p.theme.colors.primaryText};\n  }\n`;\n\nconst PaperGoogleLogin = props => {\n  const {\n    goBack,\n    modalSize,\n    connected\n  } = props;\n  const createWalletInstance = useCreateWalletInstance();\n  const setConnectionStatus = useSetConnectionStatus();\n  const setConnectedWallet = useSetConnectedWallet();\n  const connectionStatus = useConnectionStatus();\n  const themeObj = useTheme();\n\n  // Need to trigger google login on button click to avoid popup from being blocked\n  const googleLogin = async () => {\n    try {\n      const paperWallet = createWalletInstance(props.walletConfig);\n      setConnectionStatus(\"connecting\");\n      const googleWindow = openGoogleSignInWindow(themeObj);\n      if (!googleWindow) {\n        throw new Error(\"Failed to open google login window\");\n      }\n      await paperWallet.connect({\n        googleLogin: {\n          openedWindow: googleWindow,\n          closeOpenedWindow: openedWindow => {\n            openedWindow.close();\n          }\n        }\n      });\n      setConnectedWallet(paperWallet);\n      props.connected();\n    } catch (e) {\n      setConnectionStatus(\"disconnected\");\n      console.error(e);\n    }\n  };\n  useEffect(() => {\n    if (connectionStatus === \"connected\") {\n      connected();\n    }\n  }, [connectionStatus, connected]);\n  return /*#__PURE__*/jsx(Container, {\n    animate: \"fadein\",\n    flex: \"column\",\n    fullHeight: true,\n    children: /*#__PURE__*/jsxs(Container, {\n      flex: \"column\",\n      expand: true,\n      p: \"lg\",\n      style: {\n        paddingBottom: 0\n      },\n      children: [/*#__PURE__*/jsx(ModalHeader, {\n        title: /*#__PURE__*/jsxs(Container, {\n          flex: \"row\",\n          center: \"both\",\n          gap: \"xs\",\n          children: [/*#__PURE__*/jsx(GoogleIcon, {\n            size: iconSize.md\n          }), /*#__PURE__*/jsx(ModalTitle, {\n            children: \" Sign in \"\n          })]\n        }),\n        onBack: goBack\n      }), modalSize === \"compact\" ? /*#__PURE__*/jsx(Spacer, {\n        y: \"xl\"\n      }) : null, /*#__PURE__*/jsxs(Container, {\n        flex: \"column\",\n        center: \"both\",\n        expand: true,\n        style: {\n          textAlign: \"center\",\n          minHeight: \"250px\"\n        },\n        children: [connectionStatus === \"connecting\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"primaryText\",\n            multiline: true,\n            style: {\n              maxWidth: \"250px\"\n            },\n            children: \"Select your Google account in the pop-up\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xl\"\n          }), /*#__PURE__*/jsx(Container, {\n            center: \"x\",\n            flex: \"row\",\n            children: /*#__PURE__*/jsx(Spinner, {\n              size: \"lg\",\n              color: \"accentText\"\n            })\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        }), connectionStatus === \"disconnected\" && /*#__PURE__*/jsxs(Container, {\n          animate: \"fadein\",\n          children: [/*#__PURE__*/jsx(Text, {\n            color: \"danger\",\n            children: \"Failed to sign in\"\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"lg\"\n          }), /*#__PURE__*/jsxs(Button, {\n            variant: \"primary\",\n            onClick: googleLogin,\n            children: [\" \", \"Retry\", \" \"]\n          }), /*#__PURE__*/jsx(Spacer, {\n            y: \"xxl\"\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nconst paperWallet = config => {\n  const defaultRecovery = \"AWS_MANAGED\";\n  return {\n    category: \"socialLogin\",\n    isHeadless: true,\n    id: PaperWallet.id,\n    recommended: config?.recommended,\n    meta: {\n      ...PaperWallet.meta,\n      name: \"Email\",\n      iconURL: emailIcon\n    },\n    create(options) {\n      return new PaperWallet({\n        ...options,\n        ...config,\n        advancedOptions: {\n          recoveryShareManagement: \"AWS_MANAGED\",\n          ...config?.advancedOptions\n        }\n      });\n    },\n    selectUI(props) {\n      return /*#__PURE__*/jsx(PaperSelectionUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    },\n    connectUI(props) {\n      return /*#__PURE__*/jsx(PaperConnectUI, {\n        ...props,\n        recoveryShareManagement: config?.advancedOptions?.recoveryShareManagement || defaultRecovery\n      });\n    }\n  };\n};\nconst PaperSelectionUI = props => {\n  const screen = useScreenContext();\n\n  // show the icon + text if\n  // wide -\n  // compact + not main screen (safe/smart wallet list screen)\n  if (props.modalSize === \"wide\" || screen !== reservedScreens.main && props.modalSize === \"compact\") {\n    return /*#__PURE__*/jsx(WalletEntryButton, {\n      walletConfig: props.walletConfig,\n      selectWallet: () => {\n        props.onSelect(undefined);\n      }\n    });\n  }\n  return /*#__PURE__*/jsx(\"div\", {\n    children: /*#__PURE__*/jsx(PaperFormUI, {\n      walletConfig: props.walletConfig,\n      googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n      onSelect: props.onSelect\n    })\n  });\n};\nconst PaperConnectUI = props => {\n  const [loginType, setLoginType] = useState(props.selectionData);\n  if (loginType) {\n    const handleBack = () => {\n      // go back to base screen\n      if (props.modalSize === \"wide\") {\n        setLoginType(undefined);\n      }\n\n      // go to main screen\n      else {\n        props.goBack();\n      }\n    };\n    if (\"email\" in loginType) {\n      return /*#__PURE__*/jsx(PaperOTPLoginUI, {\n        ...props,\n        recoveryShareManagement: props.recoveryShareManagement,\n        selectionData: loginType.email,\n        goBack: handleBack\n      });\n    }\n\n    // google\n    else {\n      return /*#__PURE__*/jsx(PaperGoogleLogin, {\n        ...props,\n        goBack: handleBack\n      });\n    }\n  }\n  return /*#__PURE__*/jsx(PaperFormUIScreen, {\n    walletConfig: props.walletConfig,\n    googleLoginSupported: props.recoveryShareManagement !== \"USER_MANAGED\",\n    modalSize: props.modalSize,\n    onSelect: _loginType => {\n      setLoginType(_loginType);\n    },\n    onBack: props.goBack\n  });\n};\n\nvar paperWallet$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  paperWallet: paperWallet\n});\n\nexport { GoogleIcon as G, OTPInput as O, paperWallet$1 as a, openGoogleSignInWindow as o, paperWallet as p };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}