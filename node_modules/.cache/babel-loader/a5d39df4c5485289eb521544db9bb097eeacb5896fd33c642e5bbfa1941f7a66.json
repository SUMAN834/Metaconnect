{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst utils_1 = require(\"../../utils\");\nclass GnosisSafeContractEthers {\n  constructor(contract) {\n    this.contract = contract;\n    this.encode = (methodName, params) => {\n      return this.contract.interface.encodeFunctionData(methodName, params);\n    };\n  }\n  async getVersion() {\n    return await this.contract.VERSION();\n  }\n  getAddress() {\n    return this.contract.address;\n  }\n  async getNonce() {\n    return (await this.contract.nonce()).toNumber();\n  }\n  async getThreshold() {\n    return (await this.contract.getThreshold()).toNumber();\n  }\n  async getOwners() {\n    return this.contract.getOwners();\n  }\n  async isOwner(address) {\n    return this.contract.isOwner(address);\n  }\n  async getTransactionHash(safeTransactionData) {\n    return this.contract.getTransactionHash(safeTransactionData.to, safeTransactionData.value, safeTransactionData.data, safeTransactionData.operation, safeTransactionData.safeTxGas, safeTransactionData.baseGas, safeTransactionData.gasPrice, safeTransactionData.gasToken, safeTransactionData.refundReceiver, safeTransactionData.nonce);\n  }\n  async approvedHashes(ownerAddress, hash) {\n    return this.contract.approvedHashes(ownerAddress, hash);\n  }\n  async approveHash(hash, options) {\n    if (options && !options.gasLimit) {\n      options.gasLimit = await this.estimateGas('approveHash', [hash], {\n        ...options\n      });\n    }\n    const txResponse = await this.contract.approveHash(hash, options);\n    return (0, utils_1.toTxResult)(txResponse, options);\n  }\n  async isValidTransaction(safeTransaction, options) {\n    let isTxValid = false;\n    try {\n      if (options && !options.gasLimit) {\n        options.gasLimit = await this.estimateGas('execTransaction', [safeTransaction.data.to, safeTransaction.data.value, safeTransaction.data.data, safeTransaction.data.operation, safeTransaction.data.safeTxGas, safeTransaction.data.baseGas, safeTransaction.data.gasPrice, safeTransaction.data.gasToken, safeTransaction.data.refundReceiver, safeTransaction.encodedSignatures()], {\n          ...options\n        });\n      }\n      isTxValid = await this.contract.callStatic.execTransaction(safeTransaction.data.to, safeTransaction.data.value, safeTransaction.data.data, safeTransaction.data.operation, safeTransaction.data.safeTxGas, safeTransaction.data.baseGas, safeTransaction.data.gasPrice, safeTransaction.data.gasToken, safeTransaction.data.refundReceiver, safeTransaction.encodedSignatures(), options);\n    } catch {}\n    return isTxValid;\n  }\n  async execTransaction(safeTransaction, options) {\n    if (options && !options.gasLimit) {\n      options.gasLimit = await this.estimateGas('execTransaction', [safeTransaction.data.to, safeTransaction.data.value, safeTransaction.data.data, safeTransaction.data.operation, safeTransaction.data.safeTxGas, safeTransaction.data.baseGas, safeTransaction.data.gasPrice, safeTransaction.data.gasToken, safeTransaction.data.refundReceiver, safeTransaction.encodedSignatures()], {\n        ...options\n      });\n    }\n    const txResponse = await this.contract.execTransaction(safeTransaction.data.to, safeTransaction.data.value, safeTransaction.data.data, safeTransaction.data.operation, safeTransaction.data.safeTxGas, safeTransaction.data.baseGas, safeTransaction.data.gasPrice, safeTransaction.data.gasToken, safeTransaction.data.refundReceiver, safeTransaction.encodedSignatures(), options);\n    return (0, utils_1.toTxResult)(txResponse, options);\n  }\n  async estimateGas(methodName, params, options) {\n    return (await this.contract.estimateGas[methodName](...params, options)).toNumber();\n  }\n}\nexports.default = GnosisSafeContractEthers;","map":{"version":3,"names":["utils_1","require","GnosisSafeContractEthers","constructor","contract","encode","methodName","params","interface","encodeFunctionData","getVersion","VERSION","getAddress","address","getNonce","nonce","toNumber","getThreshold","getOwners","isOwner","getTransactionHash","safeTransactionData","to","value","data","operation","safeTxGas","baseGas","gasPrice","gasToken","refundReceiver","approvedHashes","ownerAddress","hash","approveHash","options","gasLimit","estimateGas","txResponse","toTxResult","isValidTransaction","safeTransaction","isTxValid","encodedSignatures","callStatic","execTransaction","exports","default"],"sources":["../../../../src/contracts/GnosisSafe/GnosisSafeContractEthers.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}